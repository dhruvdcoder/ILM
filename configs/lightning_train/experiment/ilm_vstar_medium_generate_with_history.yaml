# @package _global_
# python src/pcdd/commands/lightning_main_v2.py experiment=ilm_lm1b_generate generation.ckpt_path=/scratch3/workspace/dhruveshpate_umass_edu-text_diffusion/pcdd/logs/ilm_lm1b_stories/checkpoints/11-50000.ckpt
defaults:
  - ilm_vstar_medium


job_type: generate

generation:
  ckpt_path: ???
  output_dir: ???
  output_file_name: max_steps_${predictor.max_steps}_stopping_threshold_${predictor.stopping_threshold}_sampling_method_${predictor.sampling_method}_p_${predictor.p}_top_${predictor.top}_second_sampling_method_${predictor.second_sampling_method}_second_p_${predictor.second_p}_second_top_${predictor.second_top}.jsonl
  prepare_input_batch_for_prediction: True
  fields_to_keep_in_output:
    - "text"
    - "input_text" # this will be ground truth for star graphs
    - "time_taken"
    - "history"

datamodule:
  num_unconditional_samples: 100
  predict_dataloader_kwargs:
    batch_size: 1

predictor:
  return_history: True


tags:
  prediction_dataset: vstar_medium
  prediction_task: with_history
